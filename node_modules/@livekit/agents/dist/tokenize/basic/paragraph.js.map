{"version":3,"sources":["../../../src/tokenize/basic/paragraph.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2024 LiveKit, Inc.\n//\n// SPDX-License-Identifier: Apache-2.0\n\n/**\n * Split the text into paragraphs.\n */\nexport const splitParagraphs = (text: string): [string, number, number][] => {\n  const re = /\\n\\s*\\n/g;\n  const splits = Array.from(text.matchAll(re));\n\n  const paragraphs: [string, number, number][] = [];\n  let start = 0;\n\n  // no splits (single paragraph)\n  if (splits.length === 0) {\n    const stripped = text.trim();\n    if (!stripped) return paragraphs;\n\n    const start = text.indexOf(stripped);\n    return [[stripped, start, start + stripped.length]];\n  }\n\n  for (const split of splits) {\n    const end = split.index!;\n    const paragraph = text.slice(start, end).trim();\n    if (paragraph) {\n      const paragraphStart = start + text.slice(start, end).indexOf(paragraph);\n      const paragraphEnd = paragraphStart + paragraph.length;\n      paragraphs.push([paragraph, paragraphStart, paragraphEnd]);\n    }\n    start = end + split[0].length;\n  }\n\n  const lastParagraph = text.slice(start).trim();\n  if (lastParagraph) {\n    const paragraphStart = start + text.slice(start).indexOf(lastParagraph);\n    const paragraphEnd = paragraphStart + lastParagraph.length;\n    paragraphs.push([lastParagraph, paragraphStart, paragraphEnd]);\n  }\n\n  return paragraphs;\n};\n"],"mappings":"AAOO,MAAM,kBAAkB,CAAC,SAA6C;AAC3E,QAAM,KAAK;AACX,QAAM,SAAS,MAAM,KAAK,KAAK,SAAS,EAAE,CAAC;AAE3C,QAAM,aAAyC,CAAC;AAChD,MAAI,QAAQ;AAGZ,MAAI,OAAO,WAAW,GAAG;AACvB,UAAM,WAAW,KAAK,KAAK;AAC3B,QAAI,CAAC,SAAU,QAAO;AAEtB,UAAMA,SAAQ,KAAK,QAAQ,QAAQ;AACnC,WAAO,CAAC,CAAC,UAAUA,QAAOA,SAAQ,SAAS,MAAM,CAAC;AAAA,EACpD;AAEA,aAAW,SAAS,QAAQ;AAC1B,UAAM,MAAM,MAAM;AAClB,UAAM,YAAY,KAAK,MAAM,OAAO,GAAG,EAAE,KAAK;AAC9C,QAAI,WAAW;AACb,YAAM,iBAAiB,QAAQ,KAAK,MAAM,OAAO,GAAG,EAAE,QAAQ,SAAS;AACvE,YAAM,eAAe,iBAAiB,UAAU;AAChD,iBAAW,KAAK,CAAC,WAAW,gBAAgB,YAAY,CAAC;AAAA,IAC3D;AACA,YAAQ,MAAM,MAAM,CAAC,EAAE;AAAA,EACzB;AAEA,QAAM,gBAAgB,KAAK,MAAM,KAAK,EAAE,KAAK;AAC7C,MAAI,eAAe;AACjB,UAAM,iBAAiB,QAAQ,KAAK,MAAM,KAAK,EAAE,QAAQ,aAAa;AACtE,UAAM,eAAe,iBAAiB,cAAc;AACpD,eAAW,KAAK,CAAC,eAAe,gBAAgB,YAAY,CAAC;AAAA,EAC/D;AAEA,SAAO;AACT;","names":["start"]}